!function(){var t=function(t){if("undefined"==typeof t&&"object"!=typeof t)return console.log("D3 not found."),!1;t.selection.prototype.addClass=function(t){return this.classed(t,!0)},t.selection.prototype.after=function(e){var n=[];return this.each(function(){var t=document.createElement(e);this.parentNode.insertBefore(t,this.nextSibling),n.push(t)}),t.selectAll(n)},t.selection.prototype.appendTo=function(e){var n=t.selectAll(e),o=n.size(),i=this,r=[];return n.each(function(){var t=this;i.each(function(){if(o>1){var e=this.cloneNode(!0);t.appendChild(e),r.push(e)}else t.appendChild(this)})}),o>1&&this.remove(),r.length>0?t.selectAll(r):this},t.selection.prototype.before=function(e){var n=[];return this.each(function(){var t=document.createElement(e);this.parentNode.insertBefore(t,this),n.push(t)}),t.selectAll(n)},t.cast=function(e){if(e instanceof t.selection)return e;if("string"==typeof e)return t.selectAll(e);if(e instanceof Element)return t.selectAll(e);if(e.jquery)return console&&console.warn&&console.warn("Casting jQuery object to d3.selection"),t.selectAll(e.selector);throw TypeError("Cannot cast arbitrary object to d3.selection")},t.selection.prototype.clear=function(){return this.selectAll("*").remove(),this},t.selection.prototype.css=t.selection.prototype.style,t.labeler=function(){var t,e,n=[],o=[],i=100,r=100,s=0,l=0,h=0,a=0,c=50,u={},p=5,y=.5,d=0,f=0,x=.2,m=1,v=30,g=30,w=3,M=!1,C=!1,b=function(t){var e=n.length,i=0,r=n[t].x-o[t].x,s=o[t].y-n[t].y,l=Math.sqrt(r*r+s*s),h=!0;l>0&&(i+=l*x),r/=l,s/=l,i+=r>0&&s>0?0*w:r<0&&s>0?1*w:r<0&&s<0?2*w:3*w;for(var a,c,u,p,y,d,f,M=n[t].x,C=n[t].y-n[t].height+2,b=n[t].x+n[t].width,A=n[t].y+2,B=0;B<e;B++)B!==t&&(h=N(o[t].x,n[t].x,o[B].x,n[B].x,o[t].y,n[t].y,o[B].y,n[B].y),h&&(i+=m),a=n[B].x,u=n[B].y-n[B].height+2,c=n[B].x+n[B].width,p=n[B].y+2,y=Math.max(0,Math.min(c,b)-Math.max(a,M)),d=Math.max(0,Math.min(p,A)-Math.max(u,C)),f=y*d,i+=f*v),a=o[B].x-o[B].r,u=o[B].y-o[B].r,c=o[B].x+o[B].r,p=o[B].y+o[B].r,y=Math.max(0,Math.min(c,b)-Math.max(a,M)),d=Math.max(0,Math.min(p,A)-Math.max(u,C)),f=y*d,i+=f*g;return i},A=function(e){var c,u=Math.floor(Math.random()*n.length),y=n[u].x,x=n[u].y;c=M?t(u,n,o):b(u),n[u].x+=(Math.random()-.5)*p,n[u].y+=(Math.random()-.5)*p,n[u].x+n[u].width>i-l&&(n[u].x=y-100),n[u].x<s&&(n[u].x=y+1),n[u].y>r-a&&(n[u].y=x-1),n[u].y<h&&(n[u].y=x+1);var m;m=M?t(u,n,o):b(u);var v=m-c;Math.random()<Math.exp(-v/e)?d+=1:(n[u].x=y,n[u].y=x,f+=1)},B=function(e){var c,u=Math.floor(Math.random()*n.length),p=n[u].x,x=n[u].y;c=M?t(u,n,o):b(u);var m=(Math.random()-.5)*y,v=Math.sin(m),g=Math.cos(m);n[u].x-=o[u].x,n[u].y-=o[u].y;var w=n[u].x*g-n[u].y*v,C=n[u].x*v+n[u].y*g;n[u].x=w+o[u].x,n[u].y=C+o[u].y,n[u].x+n[u].width>i-l&&(n[u].x=p-100),n[u].x<s&&(n[u].x=p+1),n[u].y>r-a&&(n[u].y=x-1),n[u].y<h&&(n[u].y=x+1);var A;A=M?t(u,n,o):b(u);var B=A-c;Math.random()<Math.exp(-B/e)?d+=1:(n[u].x=p,n[u].y=x,f+=1)},N=function(t,e,n,o,i,r,s,l){var h,a,c,u,p;return c=(l-s)*(e-t)-(o-n)*(r-i),u=(o-n)*(i-s)-(l-s)*(t-n),p=(e-t)*(i-s)-(r-i)*(t-n),h=u/c,a=p/c,!(h<0||h>1||a<0||a>1)},E=function(t,e,n){return t-e/n};u.start=function(t){for(var e=n.length,o=1,i=1,r=0;r<t;r++){for(var s=0;s<e;s++)Math.random()<.5?A(o):B(o);o=E(o,i,t)}for(r=0;r<e;r++){for(s=0;s<e;s++)r!=s&&S(n[r],n[s]);n[r].count===e-1?n[r].showLine=!1:n[r].showLine=!0}};var S=function(t,e){var n=j(t.x,t.y,e.x,e.y),o=j(t.x,t.y,e.x+e.width,e.y),i=j(t.x+t.width,t.y,e.x,e.y),r=j(t.x+t.width,t.y,e.x+e.width,e.y);n>=c&&o>=c&&i>=c&&r>=c&&t.count++},j=function(t,e,n,o){return Math.sqrt((t-=n)*t+(e-=o)*e)};return u.width=function(t){return arguments.length?(i=t,u):i},u.padding=function(t,e,n,o){return arguments.length?(s=t,l=e,h=n,a=o,u):null},u.displayLines=function(t){return arguments.length?(c=t,u):c},u.height=function(t){return arguments.length?(r=t,u):r},u.label=function(t){return arguments.length?(n=t,u):n},u.anchor=function(t){return arguments.length?(o=t,u):o},u.alt_energy=function(e){return arguments.length?(t=e,M=!0,u):b},u.alt_schedule=function(t){return arguments.length?(e=t,C=!0,u):E},u},t.selection.prototype.dimensions=function(){var t,e=this.node(),n=this.style("display"),o=function(t){if(t.getBBox){var e=t.getBBox();return[e.width,e.height]}return[t.offsetWidth,t.offsetHeight]};if(n&&"none"!==n)return t=o(e),{width:t[0],height:t[1]};var i=e.style,r={visibility:i.visibility,position:i.position,display:i.display},s={visibility:"hidden",display:"block"};"fixed"!==r.position&&(s.position="absolute"),this.style(s),t=o(e);var l={width:t[0],height:t[1]};return this.style(r),l},t.selection.prototype.eq=function(t,e){return e=e||0,this.filter(function(n,o,i){return o==t&&i==e})},t.selection.prototype.first=function(){for(var e=0,n=this.length;e<n;e++)for(var o,i=this[e],r=0,s=i.length;r<s;r++)if(o=i[r])return t.select(o)},t.selection.prototype.hasClass=function(t){return this.classed(t)},t.selection.prototype.height=function(){return this.dimensions().height},t.selection.prototype.hide=function(){return this.style("display","none"),this},t.selection.prototype.last=function(){for(var e=this.length-1;e>=0;e--)for(var n,o=this[e],i=o.length-1;i>=0;i--)if(n=o[i])return t.select(n)},t.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})},t.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})};var e=t.selection.prototype.on;return t.selection.prototype.on=function(t,n,o){if("string"==typeof t&&t.indexOf(" ")>-1)for(var i=t.split(" "),r=0;r<i.length;r++)e.apply(this,[i[r],n,o]);else e.apply(this,[t,n,o]);return this},t.selection.prototype.prepend=function(e){var n=[];return this.each(function(){var t=document.createElement(e);this.insertBefore(t,this.firstChild),n.push(t)}),t.selectAll(n)},t.selection.prototype.removeClass=function(t){return this.classed(t,!1)},t.selection.prototype.show=function(){var t=this[0][0];if(!t)return this;var e,n=t.tagName,o=document.createElement(n),i="getComputedStyle"in window;return document.body.appendChild(o),e=(i?window.getComputedStyle(o,""):o.currentStyle).display,document.body.removeChild(o),this.style("display",e),this},t.selection.prototype.toggle=function(){var t=this[0][0];if(!t)return this;var e,n=t.tagName,o=document.createElement(n),i="getComputedStyle"in window;document.body.appendChild(o),e=(i?window.getComputedStyle(o,""):o.currentStyle).display,document.body.removeChild(o);var r="none"==this.style("display");return this.style("display",r?e:"none")},t.selection.prototype.toggleClass=function(t){for(var e=t.split(" "),n=0;n<e.length;n++){var o=e[n];this.classed(o,!this.classed(o))}return this},t.selection.prototype.trigger=function(t,n){return e.apply(this,[t])(n),this},t.selection.prototype.width=function(){return this.dimensions().width},t};"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(["d3"],t):t(d3)}();